(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{5277:function(e,t,a){e.exports=a(5368)},5286:function(e,t,a){},5365:function(e,t,a){},5366:function(e,t,a){},5367:function(e,t,a){},5368:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(30),i=a.n(c),o=a(9),u=a(15),s=a(16),l=a(18),h=a(17),p=a(19),E=a(7);a(5286);function m(e){var t=e.author,a=e.name,n=e.description,c=e.url,i=e.stars,o=e.watchers,u=e.forks;return r.createElement("a",{className:"repoCard-link",href:c,target:"_blank",rel:"noopener noreferrer"},r.createElement("div",{className:"repoCard"},r.createElement("div",{className:"repoCard-info"},r.createElement("div",{className:"repoCard-fullname"},r.createElement("span",{className:"repoCard-author"},t),r.createElement("span",{className:"repoCard-divider"},"/"),r.createElement("span",{className:"repoCard-name"},a)),r.createElement("div",{className:"repoCard-stats"},r.createElement("span",{className:"repoCard-stat"},r.createElement(E.g,null),o),r.createElement("span",{className:"repoCard-stat"},r.createElement(E.f,null),i),r.createElement("span",{className:"repoCard-stat"},r.createElement(E.e,null),u))),r.createElement("div",{className:"repoCard-desc"},n)))}var d,g=a(3);!function(e){e.FETCH_DATA="github-search/FETCH_DATA",e.FETCH_DATA_FULFILLED="github-search/FETCH_DATA_FULFILLED",e.FETCH_DATA_REJECTED="github-search/FETCH_DATA_REJECTED",e.UPDATE_DATA="github-search/UPDATE_DATA"}(d||(d={}));var b,f=function(e,t,a){return Object(g.action)(d.FETCH_DATA,{query:e,page:t,perPage:a})},T=function(e){return Object(g.action)(d.FETCH_DATA_FULFILLED,e)},v=function(e){return Object(g.action)(d.FETCH_DATA_REJECTED,e)};!function(e){e.NEXT_PAGE="github-search/paginator/NEXT_PAGE",e.PREV_PAGE="github-search/paginator/PREV_PAGE",e.SET_TOTAL="github-search/paginator/SET_TOTAL"}(b||(b={}));var A,y=function(){return Object(g.action)(b.NEXT_PAGE)},L=function(){return Object(g.action)(b.PREV_PAGE)},D=function(e){return Object(g.action)(b.SET_TOTAL,e)},O=a(22),_=a(4),j={current:1,total:0};!function(e){e.GET="github-search/ratelimit/GET",e.GET_FULFILLED="github-search/ratelimit/GET_FULFILLED",e.GET_REJECTED="github-search/ratelimit/GET_REJECTED",e.UPDATE="github-search/ratelimit/UPDATE"}(A||(A={}));var P=function(){return Object(g.action)(A.GET)},C=function(e){return Object(g.action)(A.GET_FULFILLED,e)},N=function(e){return Object(g.action)(A.GET_REJECTED,e)},F=function(e){return Object(g.action)(A.UPDATE,e)},R=a(35),w=a(64),U="https://api.github.com",I={searchRateLimit:function(){var e="".concat(U,"/rate_limit");return new Promise(function(t,a){fetch(e).then(function(e){return e.json()}).then(function(e){return t(e.resources.search)}).catch(function(e){return a(e)})})},searchRepositories:function(e,t,a,r){var n="".concat(U,"/search/repositories?q=").concat(encodeURIComponent(e),"&page=").concat(t,"&per_page=").concat(a);return new Promise(function(c,i){fetch(n).then(function(n){if(200!==n.status)return n.json().then(function(e){return console.error(e)}),void i(Error("API did not respond with status code 200"));var o={};n.headers.has("Link")&&(o=n.headers.get("Link").split(", ").map(function(e){return e.match(/<(.+)>; rel="(\w+)"/).slice(1)}).reduce(function(e,t){var a=Object(w.a)(t,2),r=a[0],n=a[1];return Object(_.a)({},e,Object(R.a)({},n,r))},{}));var u={remaining:n.headers.get("X-RateLimit-Remaining"),limit:n.headers.get("X-RateLimit-Limit"),reset:n.headers.get("X-RateLimit-Reset")};n.json().then(function(n){for(var i={},s=0;s<n.items.length;s+=r){var l=s,h=s+r;i[a/r*(t-1)+h/r]=n.items.slice(l,h)}n.items=i,c(Object(_.a)({},n,{query:e,links:o,ratelimit:u}))})}).catch(function(e){return i(e)})})}};var k,G={query:void 0,data:void 0,isLoading:!1,reposPerPage:10,reposPerQuery:30};!function(e){e.ENABLE="github-search/searchAsYouType/ENABLE",e.DISABLE="github-search/searchAsYouType/DISABLE"}(k||(k={}));var S=function(){return Object(g.action)(k.ENABLE)},q=function(){return Object(g.action)(k.DISABLE)},B="github-search.searchAsYouType",H=!localStorage.getItem(B)||"true"===localStorage.getItem(B);var J={paginator:j,ratelimit:{remaining:0,limit:0,reset:0},github:G,searchAsYouType:H},Y=Object(O.c)(Object(O.b)({paginator:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b.NEXT_PAGE:if(e.current>=e.total)return e;var a=e.current+1;return Object(_.a)({},e,{current:a});case b.PREV_PAGE:return 1===e.current?e:Object(_.a)({},e,{current:e.current-1});case b.SET_TOTAL:return Object(_.a)({},e,{total:t.payload});default:return e}},ratelimit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{remaining:0,limit:0,reset:0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A.GET:return I.searchRateLimit().then(function(e){return Y.dispatch(C(e))}).catch(function(e){return Y.dispatch(N(e))}),e;case A.GET_REJECTED:return console.error("QUERY_RATELIMIT_REJECTED",t.payload),e;case A.GET_FULFILLED:case A.UPDATE:return Object(_.a)({},t.payload);default:return e}},github:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.FETCH_DATA:var a=t.payload,r=a.query,n=a.page,c=a.perPage;return I.searchRepositories(r,n,c,e.reposPerPage).then(function(t){Y.dispatch(T(t));var a=Math.ceil(t.total_count/e.reposPerPage);Y.dispatch(D(a)),Y.dispatch(F(t.ratelimit))}).catch(function(e){return Y.dispatch(v(e))}),Object(_.a)({},e,{query:r,isLoading:!0});case d.FETCH_DATA_REJECTED:return console.error("FETCH_DATA_REJECTED",t.payload),Object(_.a)({},e,{isLoading:!1});case d.FETCH_DATA_FULFILLED:case d.UPDATE_DATA:var i=Object(_.a)({},e,{isLoading:!1});if(!e.data||e.data.query!==t.payload.query)return Object(_.a)({},i,{data:t.payload});var o=Object.assign({},e.data);return o.items=Object(_.a)({},e.data.items,t.payload.items),Object(_.a)({},i,{data:o});default:return e}},searchAsYouType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H;switch((arguments.length>1?arguments[1]:void 0).type){case k.ENABLE:return localStorage.setItem(B,"true"),!0;case k.DISABLE:return localStorage.setItem(B,"false"),!1;default:return e}}}),J);var x=Object(o.b)(function(e){return{current:e.paginator.current,total:e.paginator.total,perPage:e.github.reposPerPage}},function(e){return{toNextPage:function(){var t=Y.getState(),a=t.paginator,r=t.github,n=r.query,c=r.reposPerQuery,i=r.reposPerPage,o=r.data;if(!(a.current>=a.total)){if(!(a.current+1 in o.items)){var u=Math.max(1,a.current/(c/i));e(f(n,u+1,c))}e(y())}},toPrevPage:function(){return e(L())}}})(function(e){var t=e.current,a=e.total,n=e.toPrevPage,c=e.toNextPage;return a?r.createElement("div",{className:"githubRepoSearch-Paginator"},r.createElement(E.a,{onClick:n}),"Page: ",t," / ",a,r.createElement(E.b,{onClick:c})):null}),K=a(61),M=a(62),X=function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).attributes=void 0,a.handleKeyUp=function(e){if(!e.isPropagationStopped()){var t=a.props.onKeyUp;e.persist(),t&&t(e),a.debouncedEmit(e)}},a.debouncedEmit=function(e){return a.props.onDebounce(e)};var r=a.props,n=(r.onKeyUp,r.onDebounce,r.delay),c=Object(K.a)(r,["onKeyUp","onDebounce","delay"]);return a.attributes=c,a.debouncedEmit=Object(M.a)(n,a.debouncedEmit),a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.createElement("input",Object.assign({onKeyUp:this.handleKeyUp,tabIndex:0},this.attributes))}}]),t}(r.Component),Q=a(63),V=(a(5365),function(e){var t=3600*e.hours+60*e.minutes+e.seconds;if(e.completed){var a=Y.getState().ratelimit;return a.remaining!==a.limit&&setTimeout(function(){return Y.dispatch(P())},1e3),null}switch(t){case 1:return r.createElement("span",null,"Next reset: in ",t," second");default:return r.createElement("span",null,"Next reset: in ",t," seconds")}}),W=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(n)))).onDebounceToggle=function(e){e.target.checked?Y.dispatch(S()):Y.dispatch(q())},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.ratelimit,a=e.debounceDelay,n=e.queryMinLength,c=e.isLoading,i=e.searchAsYouType;return r.createElement("div",{className:"statusBar"},r.createElement("span",{className:"statusBar-column"},r.createElement("span",null,"Minimal query length: ",n)),r.createElement("span",{className:"statusBar-column"},r.createElement("span",null,"Rate limit: ",t.remaining,"/",t.limit),t.reset&&r.createElement(Q.a,{key:t.reset,date:1e3*t.reset,renderer:V})),r.createElement("span",{className:"statusBar-column"},r.createElement("span",null,c?r.createElement(E.c,null):r.createElement(E.d,null)),r.createElement("span",null,r.createElement("label",{htmlFor:"debounceToggle"},r.createElement("input",{type:"checkbox",id:"debounceToggle",checked:i,onChange:this.onDebounceToggle}),"Search-as-you-type")),r.createElement("span",null,"Debounce delay: ",a,"ms")))}}]),t}(r.Component);var z=Object(o.b)(function(e){return{ratelimit:e.ratelimit,isLoading:e.github.isLoading,searchAsYouType:e.searchAsYouType}})(W),$=(a(5366),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).onInputKeyUp=function(e){var t=e.key;"Tab"!==t&&"Enter"===t&&(e.stopPropagation(),a.fetch(e.target))},a.onDebounce=function(e){a.props.searchAsYouType&&a.fetch(e.target)},Y.dispatch(P()),a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"fetch",value:function(e){var t=e.value.trim();if(t){var a=this.props.queryMinLength;if(!(t.length<a)){var r=Y.getState().github.data;if(!r||r.query!==t){var n=this.props.perQuery;Y.dispatch(f(t,1,n))}}}}},{key:"render",value:function(){var e=this.props,t=e.placeholder,a=e.currentPage,n=e.data,c=e.queryMinLength;return r.createElement("div",{className:"githubRepoSearch"},r.createElement(X,{onKeyUp:this.onInputKeyUp,onDebounce:this.onDebounce,delay:750,type:"text",placeholder:t}),r.createElement(z,{debounceDelay:750,queryMinLength:c}),r.createElement(x,null),r.createElement("div",{className:"githubRepoSearch-Items"},n&&n.items[a]&&n.items[a].map(function(e){return r.createElement(m,{key:e.id,author:e.owner.login,name:e.name,description:e.description,url:e.html_url,watchers:e.watchers_count,stars:e.stargazers_count,forks:e.forks})})),r.createElement(x,null))}}]),t}(r.Component));var Z=Object(o.b)(function(e){return{currentPage:e.paginator.current,pagesTotal:e.paginator.total,ratelimit:e.ratelimit,perPage:e.github.reposPerPage,perQuery:e.github.reposPerQuery,data:e.github.data,searchAsYouType:e.searchAsYouType}})($);a(5367),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(function(){return n.a.createElement(o.a,{store:Y},n.a.createElement("div",{className:"App"},n.a.createElement(Z,{placeholder:"Search GitHub repositories",queryMinLength:3})))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[5277,1,2]]]);
//# sourceMappingURL=main.294f9e3d.chunk.js.map